{"version":3,"sources":["webpack:///./src/components/UploadButton.vue","webpack:///./src/components/UploadButton.vue?e129","webpack:///./node_modules/core-js/modules/es.string.starts-with.js","webpack:///./src/views/filecloud/Upload.vue","webpack:///./src/views/filecloud/Upload.vue?2905"],"names":["ref","disabled","name","mode","choose-label","title","uploadLabel","auto","customUpload","onUpload","files","item","key","id","_folder","e","folder","Object","keys","options","folders","comment","tagss","onSave","props","module","type","String","data","mounted","$api","filecloud","tree","get","resp","success","methods","assign","forEach","startsWith","update","file_id","put","alert","JSON","stringify","storage","check","post","filesize","size","fail","error","$toast","add","severity","summary","detail","message","life","$emit","formData","FormData","append","headers","onUploadProgress","progressEvent","progress","parseInt","Math","round","loaded","total","this","bind","then","push","catch","finally","$refs","upload","clear","__exports__","render","$","getOwnPropertyDescriptor","f","toLength","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","$startsWith","min","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","descriptor","prototype","writable","target","proto","forced","searchString","that","index","arguments","length","undefined","search","call","slice","class","components","UploadButton"],"mappings":"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","file":"js/chunk-cd13fe8a.ccfd48d4.js","sourcesContent":["<template>\n  <FileUpload ref=\"upload\" :disabled=\"disabled\" name=\"file\" mode=\"basic\"\n              :choose-label=\"title\"\n              :uploadLabel=\"title\"\n              auto\n              :customUpload=\"true\" @uploader=\"onUpload\"/>\n\n  <div v-for=\"item in files\" :key=\"item.id\">\n    <hr/>\n    <TreeSelect v-model=\"item._folder\" @change=\"(e) => item.folder = Object.keys(e)[0]\" :options=\"folders\"></TreeSelect>\n    <textarea v-model=\"item.comment\"></textarea>\n    <Chips v-model=\"item.tagss\" />\n    <Button @click=\"onSave(item)\">Save</Button>\n  </div>\n</template>\n\n\n<script>\nimport { defineComponent } from \"vue\";\nimport { $axios } from \"../plugins/axios\";\n\nexport default defineComponent({\n  props: {\n    module: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      disabled: false,\n      title: \"Choose\",\n      files: [],\n      folders: []\n    }\n  },\n  async mounted() {\n    let resp = await this.$api.filecloud.folders.tree.get()\n    if (resp.success) {\n      this.folders = resp.data.folders\n    }\n  },\n  methods: {\n    async onSave(item) {\n      let data = Object.assign({}, item)\n      if (typeof data.tagss === 'undefined') {\n        data.tagss = []\n      }\n\n      Object.keys(data).forEach(key => {\n        if (key.startsWith(\"_\")) {\n          delete data[key]\n        }\n      });\n\n      let resp = await this.$api.filecloud.update.file_id.put(data, {file_id: data.id})\n      alert(JSON.stringify(resp))\n    },\n    async onUpload(e) {\n      this.disabled = true\n      this.title = \"Check space ...\"\n\n      let resp = await this.$api.filecloud.storage.check.post({filesize: e.files[0].size})\n      if (resp.fail || resp.error) {\n        this.title = \"Choose\"\n        this.$toast.add({severity:'error', summary: 'Upload', detail:resp.data.message, life: 5000});\n        this.$emit(\"onerror\")\n      } else if (resp.success) {\n        this.title = \"Uploading ...\"\n\n        let formData = new FormData()\n        formData.append(\"file\", e.files[0])\n        formData.append(\"module\", this.module)\n\n        $axios.post('/filecloud/upload/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          onUploadProgress: function( progressEvent ) {\n            let progress = parseInt( Math.round( ( progressEvent.loaded / progressEvent.total ) * 100 ));\n            this.title = `Uploading ... ${progress}%`\n          }.bind(this)\n        }).then(data => {\n          if (data.success) {\n            data.data._folder = {[data.data.folder]: true}\n            this.files.push(data.data)\n            this.$emit(\"onupload\", data.data.id)\n          } else {\n            this.$emit(\"onerror\")\n          }\n        }).catch(() => {\n          this.$emit(\"onerror\")\n        }).finally(() => {\n          this.title = \"Choose\"\n        })\n      }\n\n      this.title = \"Choose\"\n      this.$refs.upload.clear()\n      this.disabled = false\n    },\n  }\n})\n</script>","import { render } from \"./UploadButton.vue?vue&type=template&id=129fafa8\"\nimport script from \"./UploadButton.vue?vue&type=script&lang=js\"\nexport * from \"./UploadButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/asliddin/Documents/mid-fe/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-startswith -- safe\nvar $startsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","<template>\n  <div class=\"p-p-5\">\n    <UploadButton module=\"info\" @onupload=\"onUpload\"/>\n    <hr/>\n    {{ files }}\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport UploadButton from \"../../components/UploadButton\";\n\nexport default defineComponent({\n  components: { UploadButton },\n  data() {\n    return {\n      files: []\n    }\n  },\n  methods: {\n    onUpload(id) {\n      this.files.push(id)\n    }\n  }\n})\n\n</script>","import { render } from \"./Upload.vue?vue&type=template&id=3f6b1a59\"\nimport script from \"./Upload.vue?vue&type=script&lang=js\"\nexport * from \"./Upload.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/asliddin/Documents/mid-fe/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}