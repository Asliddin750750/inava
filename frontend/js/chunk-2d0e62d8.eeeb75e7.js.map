{"version":3,"sources":["webpack:///./src/views/info/Edit.vue","webpack:///./src/views/info/Edit.vue?9fe0"],"names":["class","editPost","title","content","v$","form","category","$model","id","options","categories","optionLabel","optionValue","attribute","subject","$dirty","$invalid","disabled","$store","state","loading","footer","icon","label","type","deletePost","$t","components","ValidationErrors","setup","mounted","this","getCategories","getPost","data","status","statusList","name","value","methods","$api","info","get","resp","results","getFilters","url","console","log","JSON","stringify","$route","params","posts","post","subject_uz","content_uz","filters","put","delete","alert","validations","$setMessages","required","__exports__","render"],"mappings":"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","file":"js/chunk-2d0e62d8.eeeb75e7.js","sourcesContent":["<template>\n  <!--  <div class=\"p-py-3 p-px-3\" v-if=\"$store.state.breadcrumb.length > 0\">-->\n  <!--    <Breadcrumb :home=\"home\" :model=\"$store.state.breadcrumb\" />-->\n  <!--  </div>-->\n  <div class=\"p-grid p-nogutter p-px-3 p-pt-3\">\n    <div class=\"p-col-12 p-lg-6 p-lg-offset-3 p-xl-4 p-xl-offset-4 p-col-nogutter\">\n      <form @submit.stop.prevent=\"editPost\">\n        <Card>\n          <template #title>\n            Postni tahrirlash\n          </template>\n          <template #content>\n            <div class=\"p-fluid\">\n              <div class=\"p-field\">\n                <label>Category</label>\n                <Dropdown v-model=\"v$.form.category.$model.id\"\n                          :options=\"categories\"\n                          optionLabel=\"name_uz\"\n                          optionValue=\"id\"/>\n                <ValidationErrors :form=\"v$.form\" attribute=\"category\" />\n              </div>\n              <div class=\"p-field\">\n                <label>Subject</label>\n                <InputText v-model=\"v$.form.subject.$model\"\n                           :class=\"{'p-invalid': v$.form.subject.$dirty && v$.form.subject.$invalid}\"\n                           :disabled=\"$store.state.loading\"/>\n                <ValidationErrors :form=\"v$.form\" attribute=\"subject\" />\n              </div>\n              <div class=\"p-field\">\n                <label>Content</label>\n                <Textarea v-model=\"v$.form.content.$model\"\n                          :class=\"{'p-invalid': v$.form.content.$dirty && v$.form.content.$invalid}\"\n                          :disabled=\"$store.state.loading\"/>\n                <ValidationErrors :form=\"v$.form\" attribute=\"content\" />\n              </div>\n              <!--              <div class=\"p-field\">-->\n              <!--                <label>Status</label>-->\n              <!--                <Dropdown v-model=\"v$.form.status.$model\"-->\n              <!--                          :options=\"statusList\"-->\n              <!--                          optionLabel=\"name\"-->\n              <!--                          optionValue=\"value\"/>-->\n              <!--                <ValidationErrors :form=\"v$.form\" attribute=\"status\" />-->\n              <!--              </div>-->\n            </div>\n          </template>\n          <template #footer>\n            <Button icon=\"pi pi-times\" label=\"O'chirish\" type=\"button\"\n                    class=\"p-button-danger p-mr-3\"\n                    @click=\"deletePost\"\n                    :loading=\"$store.state.loading\"\n                    :disabled=\"$store.state.loading\"/>\n            <Button icon=\"pi pi-check\" :label=\"$t('save')\" type=\"submit\"\n                    :loading=\"$store.state.loading\"\n                    :disabled=\"$store.state.loading\"/>\n          </template>\n        </Card>\n      </form>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport {defineComponent} from \"vue\";\nimport useVuelidate from \"@vuelidate/core\";\nimport ValidationErrors from \"@/components/ValidationErrors\";\nimport {required} from \"@vuelidate/validators\";\n\nexport default defineComponent({\n  components: {ValidationErrors},\n  setup() {\n    return {\n      v$: useVuelidate()\n    }\n  },\n  mounted() {\n    this.getCategories()\n    this.getPost()\n  },\n  data() {\n    return {\n      form: {\n        category: '',\n        subject: '',\n        content: '',\n        status: ''\n      },\n      statusList: [\n        {name: 'ACTIVE', value: 1},\n        {name: 'INACTIVE', value: 0}\n      ],\n      categories: null\n    }\n  },\n  methods: {\n    async getCategories () {\n      // Kategoriyalar ro'yxatini qaytaradi\n      let resp = await this.$api.info.categories.get()\n      this.categories = resp.data.categories.data.results\n    },\n    async getFilters () {\n      // (Chala) kategoriyadan kelib chiqib, filterlar ro'yxatini qaytaradi\n      let resp = await this.$api.info.get(null, {url: 'info/category/filters/' + 1 + '/'})\n      console.log(JSON.stringify(resp.data['-']))\n    },\n    async getPost () {\n      // Post obyektini oladi\n      let id = this.$route.params.id\n      let resp = await this.$api.info.posts[id].get()\n      this.form = resp.data.post\n    },\n    async editPost () {\n      // (chala filters) Post obyektini tahrirlaydi\n      let post = {\n        category: this.form.category.id,\n        subject_uz: this.form.subject,\n        content_uz: this.form.content,\n        status: this.form.status,\n        filters: this.form.filters\n      }\n      // console.log(JSON.stringify(post))\n      let id = this.$route.params.id\n      // await this.$api.info.posts.put(this.form, id)\n      console.log(JSON.stringify(post))\n      let resp = await this.$api.info.posts[id].put(post)\n      console.log(JSON.stringify(resp))\n    },\n    async deletePost () {\n      let resp = await this.$api.info.posts[1].delete()\n      alert(JSON.stringify(resp.data))\n      // this.$router.push({name: 'info.list'})\n    }\n  },\n  validations() {\n    return {\n      form: this.$setMessages({\n        category: {\n          required\n        },\n        subject: {\n          required\n        },\n        content: {\n          required\n        },\n        status: {\n          required\n        }\n      })\n    }\n  }\n})\n</script>\n\n<style>\n\n</style>","import { render } from \"./Edit.vue?vue&type=template&id=1cf0bf1c\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/asliddin/Documents/mid-fe/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}